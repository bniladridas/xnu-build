# XNU Kernel Build Configuration
# Auto-generated by configure-build.sh

# Paths
PROJECT_ROOT := /Users/niladri/Desktop/monday/xnu-build
SOURCES_DIR := /Users/niladri/Desktop/monday/xnu-build/sources
BUILD_DIR := /Users/niladri/Desktop/monday/xnu-build/build
OUTPUT_DIR := /Users/niladri/Desktop/monday/xnu-build/output
SDK_PATH := /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk

# Architecture configuration
SUPPORTED_ARCHS := arm64 x86_64
TARGET_ARCHS := 
NATIVE_ARCH := arm64

# Compiler configuration
CC := /Applications/Xcode.app/Contents/Developer/usr/bin/clang
CXX := /Applications/Xcode.app/Contents/Developer/usr/bin/clang++
LD := /Applications/Xcode.app/Contents/Developer/usr/bin/ld
AR := /Applications/Xcode.app/Contents/Developer/usr/bin/ar
RANLIB := /Applications/Xcode.app/Contents/Developer/usr/bin/ranlib
LIBTOOL := /Applications/Xcode.app/Contents/Developer/usr/bin/libtool
STRIP := /Applications/Xcode.app/Contents/Developer/usr/bin/strip

# SDK configuration
SDK_PATH := /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
MACOSX_DEPLOYMENT_TARGET := 26.1

# Compiler flags
COMMON_CFLAGS := -isysroot $(SDK_PATH) -Wall -Wextra -fPIC
DEBUG_CFLAGS := -g -O0 -DDEBUG=1
RELEASE_CFLAGS := -O2 -DRELEASE=1

ifeq ($(CONFIGURATION), Debug)
  CFLAGS := $(COMMON_CFLAGS) $(DEBUG_CFLAGS)
else
  CFLAGS := $(COMMON_CFLAGS) $(RELEASE_CFLAGS)
endif

CFLAGS += -DKERNEL -DKERNEL_PRIVATE -DKEYSONLY

# Linker flags
LDFLAGS := -isysroot $(SDK_PATH)
ifeq ($(BUILD_LTO), 1)
  LDFLAGS += -flto
  CFLAGS += -flto=thin
endif

# Optional features
BUILD_LTO := 0
BUILD_KASAN := 0
BUILD_DEBUG := 1
VERBOSE := 1

# Build output control
ifeq ($(VERBOSE), 1)
  VERBOSE_MAKE :=
else
  VERBOSE_MAKE := @
endif

# Kernel build settings
KERNEL_FRAMEWORK := Kernel
IOK_FRAMEWORK := IOKit
KERN_FRAMEWORK := kern
BSD_FRAMEWORK := bsd

